{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet userSelectedDate, dateTimerMs, timer;\n\nconst btn = document.querySelector(\"button[data-start]\")\nconst timerRefs = {\n    dayField: document.querySelector('span[data-days]'),\n    hourField: document.querySelector('span[data-hours]'),\n    minuteField: document.querySelector('span[data-minutes]'),\n    secondField: document.querySelector('span[data-seconds]'),\n}\nbtn.addEventListener(\"click\", setTimer)\n\nfunction setTimer() {\n    updateTimer()\n    timer = setInterval(updateTimer, 1000)\n}\n\n//функция обработки-обновления таймера\nfunction updateTimer ()  {\n        const currentTime = new Date().getTime()\n        dateTimerMs = userSelectedDate - currentTime;\n        if (dateTimerMs === 0) {\n            clearInterval(timer)\n        }\n\n        const {days, hours, minutes, seconds} = convertMs(dateTimerMs)\n        \n        timerRefs.dayField.innerHTML = addLeadingZero(days);\n        timerRefs.hourField.innerHTML = addLeadingZero(hours);\n        timerRefs.minuteField.innerHTML = addLeadingZero(minutes);\n        timerRefs.secondField.innerHTML = addLeadingZero(seconds)   \n}\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date().getTime(),// сегодня в мс\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        userSelectedDate = selectedDates[0]. getTime(); //выбранная\n      \n        if(options.defaultDate >= userSelectedDate){\n        btn.disabled = true\n        iziToast.show({\n        message: \"Please choose a date in the future\",\n        position: 'topCenter',\n        color: 'red'\n    });\n       \n      } else {\n        btn.disabled = false\n      }\n    },\n  };\n\n  function convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n\n  function addLeadingZero(value) {\n    return String(value).padStart(2, '0')\n  }\n\nflatpickr('#datetime-picker', options)\n\n\n\n\n\n\n\n\n  "],"names":["userSelectedDate","dateTimerMs","timer","btn","timerRefs","setTimer","updateTimer","currentTime","days","hours","minutes","seconds","convertMs","addLeadingZero","options","selectedDates","iziToast","ms","value","flatpickr"],"mappings":"+IAKA,IAAIA,EAAkBC,EAAaC,EAEnC,MAAMC,EAAM,SAAS,cAAc,oBAAoB,EACjDC,EAAY,CACd,SAAU,SAAS,cAAc,iBAAiB,EAClD,UAAW,SAAS,cAAc,kBAAkB,EACpD,YAAa,SAAS,cAAc,oBAAoB,EACxD,YAAa,SAAS,cAAc,oBAAoB,CAC5D,EACAD,EAAI,iBAAiB,QAASE,CAAQ,EAEtC,SAASA,GAAW,CAChBC,EAAa,EACbJ,EAAQ,YAAYI,EAAa,GAAI,CACzC,CAGA,SAASA,GAAgB,CACjB,MAAMC,EAAc,IAAI,KAAM,EAAC,QAAS,EACxCN,EAAcD,EAAmBO,EAC7BN,IAAgB,GAChB,cAAcC,CAAK,EAGvB,KAAM,CAAC,KAAAM,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAIC,EAAUX,CAAW,EAE7DG,EAAU,SAAS,UAAYS,EAAeL,CAAI,EAClDJ,EAAU,UAAU,UAAYS,EAAeJ,CAAK,EACpDL,EAAU,YAAY,UAAYS,EAAeH,CAAO,EACxDN,EAAU,YAAY,UAAYS,EAAeF,CAAO,CAChE,CAEA,MAAMG,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KAAM,EAAC,QAAS,EACjC,gBAAiB,EACjB,QAAQC,EAAe,CACnBf,EAAmBe,EAAc,CAAC,EAAG,QAAO,EAEzCD,EAAQ,aAAed,GAC1BG,EAAI,SAAW,GACfa,EAAS,KAAK,CACd,QAAS,qCACT,SAAU,YACV,MAAO,KACf,CAAK,GAGGb,EAAI,SAAW,EAElB,CACL,EAEE,SAASS,EAAUK,EAAI,CAQrB,MAAMT,EAAO,KAAK,MAAMS,EAAK,KAAG,EAE1BR,EAAQ,KAAK,MAAOQ,EAAK,MAAO,IAAI,EAEpCP,EAAU,KAAK,MAAQO,EAAK,MAAO,KAAQ,GAAM,EAEjDN,EAAU,KAAK,MAASM,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAT,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAED,SAASE,EAAeK,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CAEHC,EAAU,mBAAoBL,CAAO"}