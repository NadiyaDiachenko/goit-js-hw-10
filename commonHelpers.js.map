{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet userSelectedDate, dateTimerMs, timer;\n\nconst btn = document.querySelector(\"button[data-start]\")\nconst timerRefs = {\n    dayField: document.querySelector('span[data-days]'),\n    hourField: document.querySelector('span[data-hours]'),\n    minuteField: document.querySelector('span[data-minutes]'),\n    secondField: document.querySelector('span[data-seconds]'),\n}\nbtn.addEventListener(\"click\", setTimer)\n\nfunction setTimer() {\n    updateTimer()\n    timer = setInterval(updateTimer, 1000)\n}\n\n//функция обработки-обновления таймера\nfunction updateTimer ()  {\n        const currentTime = new Date().getTime()\n        dateTimerMs = userSelectedDate - currentTime;\n\n        const {days, hours, minutes, seconds} = convertMs(dateTimerMs)\n        \n        if (seconds === 0 && minutes === 0 && hours === 0 && days === 0) {\n          clearInterval(timer)\n      }\n      \n      updateFieldMarkup(days, hours, minutes, seconds)  //обновляем поле\n}\n// функция обновления полей разметки\nfunction updateFieldMarkup(days = 0, hours = 0, minutes = 0, seconds = 0) {\n  timerRefs.dayField.innerHTML = addLeadingZero(days);\n  timerRefs.hourField.innerHTML = addLeadingZero(hours);\n  timerRefs.minuteField.innerHTML = addLeadingZero(minutes);\n  timerRefs.secondField.innerHTML = addLeadingZero(seconds)  \n}\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date().getTime(),// сегодня в мс\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      if(timer) {\n        clearInterval(timer)\n        updateFieldMarkup()  // обнуляем поле\n      }\n\n        userSelectedDate = selectedDates[0].getTime(); //выбранная\n      \n        btn.disabled = false\n\n        if (options.defaultDate >= userSelectedDate) {\n        btn.disabled = true\n\n        iziToast.show({\n        message: \"Please choose a date in the future\",\n        position: 'topCenter',\n        color: 'red'\n       });\n       }\n       \n    }\n  };\n\n  function convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n\n  function addLeadingZero(value) {\n    return String(value).padStart(2, '0')\n  }\n\nflatpickr('#datetime-picker', options)\n\n\n\n\n\n\n\n\n  "],"names":["userSelectedDate","dateTimerMs","timer","btn","timerRefs","setTimer","updateTimer","currentTime","days","hours","minutes","seconds","convertMs","updateFieldMarkup","addLeadingZero","options","selectedDates","iziToast","ms","value","flatpickr"],"mappings":"+IAKA,IAAIA,EAAkBC,EAAaC,EAEnC,MAAMC,EAAM,SAAS,cAAc,oBAAoB,EACjDC,EAAY,CACd,SAAU,SAAS,cAAc,iBAAiB,EAClD,UAAW,SAAS,cAAc,kBAAkB,EACpD,YAAa,SAAS,cAAc,oBAAoB,EACxD,YAAa,SAAS,cAAc,oBAAoB,CAC5D,EACAD,EAAI,iBAAiB,QAASE,CAAQ,EAEtC,SAASA,GAAW,CAChBC,EAAa,EACbJ,EAAQ,YAAYI,EAAa,GAAI,CACzC,CAGA,SAASA,GAAgB,CACjB,MAAMC,EAAc,IAAI,KAAM,EAAC,QAAS,EACxCN,EAAcD,EAAmBO,EAEjC,KAAM,CAAC,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAIC,EAAUX,CAAW,EAEzDU,IAAY,GAAKD,IAAY,GAAKD,IAAU,GAAKD,IAAS,GAC5D,cAAcN,CAAK,EAGvBW,EAAkBL,EAAMC,EAAOC,EAASC,CAAO,CACrD,CAEA,SAASE,EAAkBL,EAAO,EAAGC,EAAQ,EAAGC,EAAU,EAAGC,EAAU,EAAG,CACxEP,EAAU,SAAS,UAAYU,EAAeN,CAAI,EAClDJ,EAAU,UAAU,UAAYU,EAAeL,CAAK,EACpDL,EAAU,YAAY,UAAYU,EAAeJ,CAAO,EACxDN,EAAU,YAAY,UAAYU,EAAeH,CAAO,CAC1D,CAEA,MAAMI,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KAAM,EAAC,QAAS,EACjC,gBAAiB,EACjB,QAAQC,EAAe,CAClBd,IACD,cAAcA,CAAK,EACnBW,EAAmB,GAGnBb,EAAmBgB,EAAc,CAAC,EAAE,QAAO,EAE3Cb,EAAI,SAAW,GAEXY,EAAQ,aAAef,IAC3BG,EAAI,SAAW,GAEfc,EAAS,KAAK,CACd,QAAS,qCACT,SAAU,YACV,MAAO,KACf,CAAQ,EAGH,CACL,EAEE,SAASL,EAAUM,EAAI,CAQrB,MAAMV,EAAO,KAAK,MAAMU,EAAK,KAAG,EAE1BT,EAAQ,KAAK,MAAOS,EAAK,MAAO,IAAI,EAEpCR,EAAU,KAAK,MAAQQ,EAAK,MAAO,KAAQ,GAAM,EAEjDP,EAAU,KAAK,MAASO,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAV,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAED,SAASG,EAAeK,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CAEHC,EAAU,mBAAoBL,CAAO"}